#workspaces
workspace_auto_back_and_forth yes
set $ws9 "9:"
set $ws10 "10:"

#===========#
# Bindings  #
#===========#

# Control stuff
set $mod Mod4
focus_follows_mouse no
floating_modifier $mod

# Applications
bindsym $mod+Return	exec qterminal
bindsym $mod+Shift+q	kill
bindsym $mod+Escape	exec --no-startup-id albert show

bindsym $mod+F1 exec imv -f ~/Pictures/bepo.png

bindsym $mod+b		exec --no-startup-id firefox-developer-edition
bindsym $mod+Shift+b	exec --no-startup-id firefox-developer-edition -private-window
bindsym $mod+e		exec --no-startup-id GDK_BACKEND=x11 thunar
bindsym $mod+Print	exec grim -g "$(slurp -d)" - | wl-copy
bindsym Print		exec grim - | wl-copy

# touch launcher for my tablet
bindcode --input-device=1:1:gpio-keys 133 exec python ~/Documents/Prog/tiling4tablets/TouchLauncher/script.py

# Musique
bindsym --locked XF86AudioPrev exec --no-startup-id	mpc -h "127.0.0.1" -p 6600 prev
bindsym --locked XF86AudioNext exec --no-startup-id	mpc -h "127.0.0.1" -p 6600 next
bindsym --locked XF86AudioStop exec --no-startup-id	mpc -h "127.0.0.1" -p 6600 stop
bindsym --locked XF86AudioPlay exec --no-startup-id	mpc -h "127.0.0.1" -p 6600 toggle
bindsym --locked Mod1+Control+Tab exec --no-startup-id	mpc -h "127.0.0.1" -p 6600 toggle # MX Master thumb "key"
bindsym XF86Tools exec ario

# Volume
bindsym --locked XF86AudioLowerVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ -2%
bindsym --locked XF86AudioRaiseVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ +2%
bindsym --locked XF86AudioMute        exec --no-startup-id pactl set-sink-mute   @DEFAULT_SINK@ toggle

# Change focus
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# Change split direction
bindsym $mod+h split h
bindsym $mod+v split v

# Toggle fullscreen
bindsym $mod+f fullscreen toggle

# toggle tiling / floating
bindsym $mod+Shift+space floating toggle

# Switch workspace
bindsym $mod+quotedbl workspace 1
bindsym $mod+guillemotleft workspace 2
bindsym $mod+guillemotright workspace 3
bindsym $mod+parenleft workspace 4
bindsym $mod+parenright workspace 5
bindsym $mod+at workspace 6
bindsym $mod+plus workspace 7
bindsym $mod+minus workspace 8
bindsym $mod+slash workspace $ws9
bindsym $mod+asterisk workspace $ws10

# Move container
#workspaces
bindsym $mod+Shift+quotedbl move container to workspace 1
bindsym $mod+Shift+guillemotleft move container to workspace 2
bindsym $mod+Shift+guillemotright move container to workspace 3
bindsym $mod+Shift+parenleft move container to workspace 4
bindsym $mod+Shift+parenright move container to workspace 5
bindsym $mod+Shift+at move container to workspace 6
bindsym $mod+Shift+plus move container to workspace 7
bindsym $mod+Shift+minus move container to workspace 8
bindsym $mod+Shift+slash move container to workspace $ws9
bindsym $mod+Shift+asterisk move container to workspace $ws10
#relative
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# Resize mode
mode "resize" {
        bindsym Left resize shrink width 10 px or 2
        bindsym Down resize grow height 10 px or 2
        bindsym Up resize shrink height 10 px or 2
        bindsym Right resize grow width 10 px or 2

        bindsym Escape mode "default"
        bindsym Return mode "default"
}
bindsym $mod+r mode "resize"

# "System" mode
mode "system" {
	bindsym p exec poweroff
	bindsym e exit
	bindsym r reload
	bindsym l exec "systemctl suspend && swaylock -i ~/Pictures/wallpaper.png --scaling fill -F"

        bindsym Escape mode "default"
        bindsym Return mode "default"
}
bindsym $mod+Shift+Return mode "system"

#=============#
# Fancy stuff #
#=============#

# waybar
bar {
	swaybar_command waybar
}

# Gaps
default_border pixel 2
# Border colors (white when focused, black otherwise)
client.focused 		#FFFFFF #000000 #FFFFFF #AAAAAA #FFFFFF
client.focused_inactive	#000000 #000000 #AAAAAA #000000 #000000
client.unfocused	#000000 #000000 #AAAAAA #000000 #000000
hide_edge_borders smart
gaps inner 5
gaps outer 0
smart_gaps on

# Fixes
for_window [window_role="pop-up"] floating enable
for_window [window_role="task_dialog"] floating enable
for_window [title="Firefox Developer Edition - Sharing Indicator"] floating enable

#=====================#
# Input tweaks/config #
#=====================#

# set keyboard layout
input * {
	xkb_layout fr,fr
	xkb_variant bepo,
	xkb_options caps:none,grp:shifts_toggle,grp_led:caps
	# Disable capslock
	# Use the capslock led as a layout indicator
	# Change between bépo and azerty by pressing both shift keys
}

input "6551:4641:Wireless_Air_mouse_Keyboard" {
	xkb_layout fr
}

# map some inputs to screens
# Tablet touchscreen
input "10248:4117:FTSC1000:00_2808:1015" map_to_output DSI-1
# Desktop drawing tablet
input "9580:110:HUION_Huion_Tablet_Pen" map_to_output HDMI-A-1
# Desktop touchscreen
input "3823:5:WaveShare_WaveShare_Touchscreen" map_to_output DP-1

# auto hide cursor after 5 seconds
seat * hide_cursor 5000

# scroll horizontally when holding shift
bindsym Shift+button4 seat * cursor press button6
bindsym Shift+button5 seat * cursor press button7

#=========#
# Startup #
#=========#

exec_always Documents/Prog/tiling4tablets/AutoRotate/autorotate
exec kanshi
exec_always setrandom Pictures/Wallpapers/
exec mako
exec redshift -m wayland -t6500K:2400K
exec QT_QPA_PLATFORM="" albert
exec bash ~/.startup.sh
exec clipman -d --max-items=8
