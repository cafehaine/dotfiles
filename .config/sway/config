# Define some variables that might be overriden by host-specific configs
set $mod Mod4
set $terminal ghostty
set $firefox firefox
set $file_explorer thunar
include "~/.config/sway/$(hostname)"

# Idle configuration

exec swayidle -w \
         timeout 60 'brightnessctl --save set 30%-' resume 'brightnessctl --restore' \
         timeout 120 'swaylock -f -c 111111' \
         timeout 180 'swaymsg "output * power off"' resume 'swaymsg "output * power on"' \
         before-sleep 'swaylock -f -c 111111'

# Input configuration:

input type:touchpad {
    dwt enabled
    tap enabled
    natural_scroll enabled
    middle_emulation enabled
}

input type:keyboard {
    xkb_layout "fr,fr"
    xkb_variant "bepo,"
    xkb_options grp:shifts_toggle
}

seat * hide_cursor 5000

# Applications

bindsym $mod+Return exec $terminal
bindsym $mod+Space exec j4-dmenu-desktop -d "wmenu -i"
bindsym Alt+F2 exec wmenu-run
bindsym $mod+b exec $firefox
bindsym $mod+Shift+b exec $firefox --private-window
bindsym $mod+p exec wdisplays
bindsym $mod+g exec gimp
bindsym $mod+e exec $file_explorer
bindsym $mod+n exec swaync-client -t
# Sound
bindsym --locked XF86AudioMute exec pactl set-sink-mute \@DEFAULT_SINK@ toggle
bindsym --locked XF86AudioLowerVolume exec pactl set-sink-volume \@DEFAULT_SINK@ -5% && ffplay /usr/share/sounds/freedesktop/stereo/bell.oga -nodisp -nostats -hide_banner -autoexit
bindsym --locked XF86AudioRaiseVolume exec pactl set-sink-volume \@DEFAULT_SINK@ +5% && ffplay /usr/share/sounds/freedesktop/stereo/bell.oga -nodisp -nostats -hide_banner -autoexit
bindsym --locked XF86AudioMicMute exec pactl set-source-mute \@DEFAULT_SOURCE@ toggle
# Music
bindsym --locked XF86AudioPrev exec playerctl previous
bindsym --locked XF86AudioNext exec playerctl next
bindsym --locked XF86AudioStop exec playerctl stop
bindsym --locked XF86AudioPlay exec playerctl play-pause
bindsym XF86Tools exec ario
# Screen brightness
bindsym --locked XF86MonBrightnessDown exec brightnessctl set 5%-
bindsym --locked XF86MonBrightnessUp exec brightnessctl set 5%+
# Screenshot
bindsym Print exec grim - | wl-copy
bindsym $mod+Print exec slurp | grim -g - - | wl-copy
# Misc
bindsym $mod+Shift+c reload
bindsym $mod+Shift+e exit

# Workspaces

workspace_auto_back_and_forth yes
# Switch to workspace
bindsym --to-code $mod+quotedbl workspace number 1
bindsym --to-code $mod+guillemotleft workspace number 2
bindsym --to-code $mod+guillemotright workspace number 3
bindsym --to-code $mod+parenleft workspace number 4
bindsym --to-code $mod+parenright workspace number 5
bindsym --to-code $mod+at workspace number 6
bindsym --to-code $mod+plus workspace number 7
bindsym --to-code $mod+minus workspace number 8
bindsym --to-code $mod+slash workspace number 9
bindsym --to-code $mod+asterisk workspace number 10
bindgesture --exact swipe:3:left workspace next_on_output
bindgesture --exact swipe:3:right workspace prev_on_output
bindsym $mod+button4 prev_on_output
bindsym $mod+button5 next_on_output
bindsym $mod+button6 prev_on_output
bindsym $mod+button7 next_on_output
# Move focused container to workspace
bindsym --to-code $mod+Shift+quotedbl move container to workspace number 1
bindsym --to-code $mod+Shift+guillemotleft move container to workspace number 2
bindsym --to-code $mod+Shift+guillemotright move container to workspace number 3
bindsym --to-code $mod+Shift+parenleft move container to workspace number 4
bindsym --to-code $mod+Shift+parenright move container to workspace number 5
bindsym --to-code $mod+Shift+at move container to workspace number 6
bindsym --to-code $mod+Shift+plus move container to workspace number 7
bindsym --to-code $mod+Shift+minus move container to workspace number 8
bindsym --to-code $mod+Shift+slash move container to workspace number 9
bindsym --to-code $mod+Shift+asterisk move container to workspace number 10

# Windows

default_border pixel 3
focus_follows_mouse no
floating_modifier $mod
bindsym $mod+Shift+q kill
bindsym $mod+d layout default
# Border colors (white when focused, black otherwise)
client.focused 		#FFFFFF #000000 #FFFFFF #FFFFFF #008AFF
client.focused_inactive	#000000 #000000 #AAAAAA #FFFFFF #666666
client.unfocused	#000000 #000000 #AAAAAA #FFFFFF #666666
# Fixes
for_window [window_role="pop-up"] floating enable
for_window [window_role="task_dialog"] floating enable
for_window [title="Firefox.* â€” Sharing Indicator"] floating enable
for_window [title="Picture-in-Picture"] floating enable
# Change focus
bindsym $mod+Left  focus left
bindsym $mod+Down  focus down
bindsym $mod+Up    focus up
bindsym $mod+Right focus right
# Change split direction
bindsym $mod+h split h
bindsym $mod+v split v
# Toggle fullscreen
bindsym $mod+f fullscreen toggle
# toggle tiling / floating
bindsym $mod+Shift+space floating toggle
# Move container relative
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right
# Resize mode
mode "resize" {
        bindsym Left resize shrink width 10 px or 2
        bindsym Down resize grow height 10 px or 2
        bindsym Up resize shrink height 10 px or 2
        bindsym Right resize grow width 10 px or 2

        bindsym Escape mode "default"
        bindsym Return mode "default"
}
bindsym $mod+r mode "resize"
# Tabs
bindsym $mod+t layout tabbed
bindsym $mod+Tab focus right
bindsym $mod+Shift+Tab focus left

# Bar

bar swaybar_command waybar

# Daemons

exec_always kanshi
exec_always swaync
exec_always squeekboard
exec_always kdeconnect-indicator

# Global config

include /etc/sway/config.d/*
